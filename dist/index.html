<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,400;0,500;1,400;1,500&display=swap"
          rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <title>Документы</title>
</head>
<body>
<div class="container">
    <h1>Документы</h1>
    <!-- Категории -->
    <input class="search-input" type="text" placeholder="Поиск" data-bind="value: searchQuery, valueUpdate: 'input'"/>

    <div class="categories" data-bind="foreach: categories">
        <div class="category" draggable="true"
             data-bind="visible: $root.isMatch($data), ondragstart: $root.startDragging, ondragover: $root.allowDrop, ondrop: $root.drop">
            <div class="category__header" data-bind="click: function() { isCollapsed(!isCollapsed()) }">
                <div class="category__name" data-bind="ifnot: isEditing">
                    <span data-bind="text: name"></span>
                </div>
                <div class="category__input" data-bind="if: isEditing">
                    <input type="text" data-bind="value: name">
                </div>
                <div class="buttons">
                    <button data-bind="click: $root.changeContent"><img src="icons/change.svg" alt="Change" width="12"
                                                                        height="12"></button>
                    <button data-bind="click: $root.deleteCategory, css: { blur: items().length > 0 }"><img
                            src="icons/delete.svg" alt="Delete" width="12"
                            height="12"></button>
                    <button data-bind="click: $root.toggleDraggable, css: { blur: !isDraggable() }">
                        <img src="icons/drag.svg" alt="Drag" width="12" height="12">
                    </button>
                </div>
            </div>

            <!-- Элементы -->
            <div class="items" data-bind="foreach: items, visible: !isCollapsed()">
                <div class="item"
                     draggable="true"
                     data-bind="ondragstart: $root.startDragging, ondragover: $root.allowDrop, ondrop: $root.drop">
                    <div class="item__name" data-bind="ifnot: isEditing">
                        <span data-bind="text: name"></span>
                    </div>
                    <div class="item__input" data-bind="if: isEditing">
                        <input type="text" data-bind="value: name">
                    </div>
                    <div class="buttons">
                        <button data-bind="click: $root.changeContent">
                            <img src="icons/change.svg" alt="Change"
                                 width="12"
                                 height="12">
                        </button>
                        <button data-bind="click: $root.deleteItem">
                            <img src="icons/delete.svg" alt="Delete" width="12"
                                 height="12">
                        </button>
                        <button data-bind="click: $root.toggleDraggable, css: { blur: !isDraggable() }">
                            <img src="icons/drag.svg" alt="Drag" width="12" height="12">
                        </button>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <!-- Неотсортированные элементы -->
    <div class="uncategorizedItems" data-bind="foreach: uncategorizedItems">
        <div class="item"
             draggable="true"
             data-bind="visible: $root.isMatch($data), ondragstart: $root.startDragging, ondragover: $root.allowDrop, ondrop: $root.drop">
            <div class="item__name" data-bind="ifnot: isEditing">
                <span data-bind="text: name"></span>
            </div>
            <div class="item__input" data-bind="if: isEditing">
                <input type="text" data-bind="value: name">
            </div>
            <div class="buttons">
                <button data-bind="click: $root.changeContent">
                    <img src="icons/change.svg" alt="Change" width="12"
                         height="12"></button>
                <button data-bind="click: $root.deleteItem">
                    <img src="icons/delete.svg" alt="Delete" width="12"
                         height="12">
                </button>
                <button data-bind="click: $root.toggleDraggable, css: { blur: !isDraggable() }">
                    <img src="icons/drag.svg" alt="Drag" width="12"
                         height="12"
                    >
                </button>
            </div>
        </div>
    </div>
    <script src="app.js"></script>
</div>

</body>
</html>